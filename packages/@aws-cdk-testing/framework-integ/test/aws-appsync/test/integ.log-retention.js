"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path_1 = require("path");
const aws_logs_1 = require("aws-cdk-lib/aws-logs");
const aws_cdk_lib_1 = require("aws-cdk-lib");
const integ_tests_alpha_1 = require("@aws-cdk/integ-tests-alpha");
const aws_appsync_1 = require("aws-cdk-lib/aws-appsync");
const app = new aws_cdk_lib_1.App();
const stack = new aws_cdk_lib_1.Stack(app, 'AppSyncIntegLogRetention');
const retentionTime = aws_logs_1.RetentionDays.ONE_WEEK;
const logConfig = {
    retention: retentionTime,
};
const api = new aws_appsync_1.GraphqlApi(stack, 'GraphqlApi', {
    authorizationConfig: {},
    name: 'IntegLogRetention',
    schema: aws_appsync_1.SchemaFile.fromAsset(path_1.join(__dirname, 'appsync.test.graphql')),
    logConfig,
});
const integ = new integ_tests_alpha_1.IntegTest(app, 'Integ', { testCases: [stack] });
const describe = integ.assertions.awsApiCall('CloudWatchLogs', 'describeLogGroups', {
    logGroupNamePrefix: api.logGroup.logGroupName,
});
describe.expect(integ_tests_alpha_1.ExpectedResult.objectLike({
    logGroups: [
        {
            logGroupName: api.logGroup.logGroupName,
            retentionInDays: retentionTime,
        },
    ],
}));
app.synth();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW50ZWcubG9nLXJldGVudGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImludGVnLmxvZy1yZXRlbnRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwrQkFBNEI7QUFDNUIsbURBQXFEO0FBQ3JELDZDQUF5QztBQUN6QyxrRUFBdUU7QUFDdkUseURBQTRFO0FBRTVFLE1BQU0sR0FBRyxHQUFHLElBQUksaUJBQUcsRUFBRSxDQUFDO0FBQ3RCLE1BQU0sS0FBSyxHQUFHLElBQUksbUJBQUssQ0FBQyxHQUFHLEVBQUUsMEJBQTBCLENBQUMsQ0FBQztBQUd6RCxNQUFNLGFBQWEsR0FBRyx3QkFBYSxDQUFDLFFBQVEsQ0FBQztBQUM3QyxNQUFNLFNBQVMsR0FBYztJQUMzQixTQUFTLEVBQUUsYUFBYTtDQUN6QixDQUFDO0FBRUYsTUFBTSxHQUFHLEdBQUcsSUFBSSx3QkFBVSxDQUFDLEtBQUssRUFBRSxZQUFZLEVBQUU7SUFDOUMsbUJBQW1CLEVBQUUsRUFBRTtJQUN2QixJQUFJLEVBQUUsbUJBQW1CO0lBQ3pCLE1BQU0sRUFBRSx3QkFBVSxDQUFDLFNBQVMsQ0FBQyxXQUFJLENBQUMsU0FBUyxFQUFFLHNCQUFzQixDQUFDLENBQUM7SUFDckUsU0FBUztDQUNWLENBQUMsQ0FBQztBQUVILE1BQU0sS0FBSyxHQUFHLElBQUksNkJBQVMsQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFLEVBQUUsU0FBUyxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBRWxFLE1BQU0sUUFBUSxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLGdCQUFnQixFQUMzRCxtQkFBbUIsRUFDbkI7SUFDRSxrQkFBa0IsRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLFlBQVk7Q0FDOUMsQ0FBQyxDQUFDO0FBRUwsUUFBUSxDQUFDLE1BQU0sQ0FBQyxrQ0FBYyxDQUFDLFVBQVUsQ0FBQztJQUN4QyxTQUFTLEVBQUU7UUFDVDtZQUNFLFlBQVksRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLFlBQVk7WUFDdkMsZUFBZSxFQUFFLGFBQWE7U0FDL0I7S0FDRjtDQUNGLENBQUMsQ0FBQyxDQUFDO0FBRUosR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgam9pbiB9IGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgUmV0ZW50aW9uRGF5cyB9IGZyb20gJ2F3cy1jZGstbGliL2F3cy1sb2dzJztcbmltcG9ydCB7IEFwcCwgU3RhY2sgfSBmcm9tICdhd3MtY2RrLWxpYic7XG5pbXBvcnQgeyBFeHBlY3RlZFJlc3VsdCwgSW50ZWdUZXN0IH0gZnJvbSAnQGF3cy1jZGsvaW50ZWctdGVzdHMtYWxwaGEnO1xuaW1wb3J0IHsgR3JhcGhxbEFwaSwgTG9nQ29uZmlnLCBTY2hlbWFGaWxlIH0gZnJvbSAnYXdzLWNkay1saWIvYXdzLWFwcHN5bmMnO1xuXG5jb25zdCBhcHAgPSBuZXcgQXBwKCk7XG5jb25zdCBzdGFjayA9IG5ldyBTdGFjayhhcHAsICdBcHBTeW5jSW50ZWdMb2dSZXRlbnRpb24nKTtcblxuXG5jb25zdCByZXRlbnRpb25UaW1lID0gUmV0ZW50aW9uRGF5cy5PTkVfV0VFSztcbmNvbnN0IGxvZ0NvbmZpZzogTG9nQ29uZmlnID0ge1xuICByZXRlbnRpb246IHJldGVudGlvblRpbWUsXG59O1xuXG5jb25zdCBhcGkgPSBuZXcgR3JhcGhxbEFwaShzdGFjaywgJ0dyYXBocWxBcGknLCB7XG4gIGF1dGhvcml6YXRpb25Db25maWc6IHt9LFxuICBuYW1lOiAnSW50ZWdMb2dSZXRlbnRpb24nLFxuICBzY2hlbWE6IFNjaGVtYUZpbGUuZnJvbUFzc2V0KGpvaW4oX19kaXJuYW1lLCAnYXBwc3luYy50ZXN0LmdyYXBocWwnKSksXG4gIGxvZ0NvbmZpZyxcbn0pO1xuXG5jb25zdCBpbnRlZyA9IG5ldyBJbnRlZ1Rlc3QoYXBwLCAnSW50ZWcnLCB7IHRlc3RDYXNlczogW3N0YWNrXSB9KTtcblxuY29uc3QgZGVzY3JpYmUgPSBpbnRlZy5hc3NlcnRpb25zLmF3c0FwaUNhbGwoJ0Nsb3VkV2F0Y2hMb2dzJyxcbiAgJ2Rlc2NyaWJlTG9nR3JvdXBzJyxcbiAge1xuICAgIGxvZ0dyb3VwTmFtZVByZWZpeDogYXBpLmxvZ0dyb3VwLmxvZ0dyb3VwTmFtZSxcbiAgfSk7XG5cbmRlc2NyaWJlLmV4cGVjdChFeHBlY3RlZFJlc3VsdC5vYmplY3RMaWtlKHtcbiAgbG9nR3JvdXBzOiBbXG4gICAge1xuICAgICAgbG9nR3JvdXBOYW1lOiBhcGkubG9nR3JvdXAubG9nR3JvdXBOYW1lLFxuICAgICAgcmV0ZW50aW9uSW5EYXlzOiByZXRlbnRpb25UaW1lLFxuICAgIH0sXG4gIF0sXG59KSk7XG5cbmFwcC5zeW50aCgpO1xuIl19